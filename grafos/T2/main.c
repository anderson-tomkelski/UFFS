#include <stdio.h>

#define max 1 << 30

void print(int element, int qeue[4][21]){
  for(int i = element; i != 0;){
    if(i == 20)
      printf("z -> ");
    else
      printf("%c -> ", 97 + i);

    i = qeue[1][i];
  }
  printf("a\n");
}

int qeueIsEmpty(int qeue[4][21]){
  for(int i = 0; i < 21; i++){
    if(qeue[3][i] != -1)
      return 0;
  }
  return 1;
}

void backTracking(int adj[21][21], int qeue[4][21]){
  int total;
  int small = 1 << 30;
  int smallPos;
  for(int i = 0; i < 21; i++){
    if(qeue[3][i] < small && qeue[3][i] > 0){
      small = qeue[3][i];
      smallPos = i;
    }
  }

  total = qeue[0][smallPos];
  for(int i = 0; i < 21; i++){
    if(adj[smallPos][i] != 0 && qeue[2][i] == 0){
      qeue[0][i] = total + 1;
      qeue[1][i] = smallPos;
      qeue[2][i] = 1;
      qeue[3][i] = total + 1;
    }
  }

  qeue[3][smallPos] = -1;
  qeue[2][smallPos] = 2;

  printf("qeue: Atual[%d]\n", smallPos);
  for(int i = 0; i < 21; i++){
    printf("[%d] = %d / Cor = %d / Anterior = %d / Custo = %d\n", i, qeue[3][i], qeue[2][i], qeue[1][i], qeue[0][i]);
  }

  if(!qeueIsEmpty(qeue)){
    backTracking(adj, qeue);
  }
}

int main(){
  //                  a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,z    a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,z
  int adj[21][21] = {{0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0}, {1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, // a, b
                     {0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, {0,1,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0}, // c, d
                     {0,0,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, {0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0}, // e, f
                     {0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0}, {0,0,0,0,0,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0}, // g, h
                     {0,0,0,0,0,0,1,1,0,1,0,0,0,0,0,0,0,0,0,0,0}, {0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,1}, // i, j
                     {1,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0}, {0,0,0,1,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0}, // k, l
                     {0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0}, {0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0}, // m, n
                     {0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,1,0,1,0,0,0}, {0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0}, // o, p
                     {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,0}, {0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0}, // q, r
                     {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,1}, {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,1}, // s, t
                     {0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,1,0}};                                             // z

  //                 a,b,c,d,e,f,g     a,b,c,d,e,f,g     a,b,c,d,e,f,g    a,b,c,d,e, f,g
  int adj2[7][7] = {{0,7,0,5,0,0,0},  {7,0,8,9,7,0,0},  {0,8,0,0,5,0,0}, {5,9,0,0,15,6,0},  //a, b, c, d
                    {0,7,5,15,0,8,9}, {0,0,0,6,8,0,11}, {0,0,0,0,9,11,0}};                  //e, f, g

  int qeue[4][21] = {{0,max,max,max,max,max,max,max,max,max,max,max,max,max,max,max,max,max,max,max,max}, // Distance
                     {-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1},                    // Previous V
                     {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},                                         // Color = {0, 1, 2} = {W, G, B}
                     {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}};                                        // Qeue

  backTracking(adj, qeue);

  print(20, qeue);

  return 0;
}
